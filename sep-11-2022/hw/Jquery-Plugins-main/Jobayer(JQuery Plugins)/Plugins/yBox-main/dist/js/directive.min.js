"use strict";function zoom(t,e){t=void 0!==t&&Object.keys(t).length?t:{};for(var n,i,s,a,l,r,o,u,c,d,m,h,v,f,b,g,A,p,w,M,E,x,C,S,D,L,F,W,y,R,Y,H,X=(e=void 0!==e&&Object.keys(e).length?e:{}).scaleDefault||2,k=e.scaleDifference||.5,z=e.scaleMax||10,N=e.scaleMin||1,T=t.active||"active",B="data-scale",O="data-translate-x",j="data-translate-y",q=t.transition||"transition",K=t.visible||"visible",V=document.getElementsByClassName(t.zoom||"zoom"),G=!1,I=[null],J=0,P=!1,Q=0,U=[null],Z=0;Z<V.length;Z++)n=V[Z],(i=n.children[0]).setAttribute(B,1),i.setAttribute(O,0),i.setAttribute(j,0);window.addEventListener("load",function(){for(var t=0;t<V.length;t++)n=V[t],addClass(i=n.children[0],K);window.addEventListener("resize",function(){for(var t=0;t<V.length;t++)n=V[t],i=n.children[0],!1!==hasClass(n,T)&&(s=n.clientHeight,a=n.clientWidth,u=i.clientHeight,c=i.clientWidth,d=parseFloat(i.getAttribute(O)),m=parseFloat(i.getAttribute(j)),A=(c*(Y=X)-a)/2,p=(u*Y-s)/2,W=c*Y>a?minMax(d,-1*A,A):0,y=u*Y>s?minMax(m,-1*p,p):0,1===Y&&removeClass(n,T),i.setAttribute(B,Y),i.setAttribute(O,W),i.setAttribute(j,y),moveScaleElement(i,W+"px",y+"px",Y))})}),massAddEventListener(V,"mousedown",function(t){if(t.preventDefault(),!0===P||1!==t.which)return!1;if(n=this,i=this.children[0],v=t.clientX,b=t.clientY,null===I[0])I[0]=t.target,I[1]=v,I[2]=b,setTimeout(function(){I=[null]},300);else if(I[0]===t.target&&J<=5&&!0===isWithinRange(v,I[1]-10,I[1]+10)&&!0===isWithinRange(b,I[2]-10,I[2]+10))return addClass(i,q),!0===hasClass(n,T)?(i.setAttribute(B,1),i.setAttribute(O,0),i.setAttribute(j,0),removeClass(n,T),moveScaleElement(i,0,0,1)):(i.setAttribute(B,X),i.setAttribute(O,0),i.setAttribute(j,0),addClass(n,T),moveScaleElement(i,0,0,X)),setTimeout(function(){removeClass(i,q)},200),I=[null],!1;w=n.getBoundingClientRect(),l=w.left,r=w.top,s=n.clientHeight,a=n.clientWidth,u=i.clientHeight,c=i.clientWidth,d=parseFloat(i.getAttribute(O)),m=parseFloat(i.getAttribute(j)),o=minMax(parseFloat(i.getAttribute(B)),N,z),J=0,G=!0}),massAddEventListener(V,"mouseenter",function(){disableScroll(!0)}),massAddEventListener(V,"mouseleave",function(){enableScroll()}),document.addEventListener("mousemove",function(t){if(!0===P||!1===G)return!1;x=t.clientX,S=t.clientY,A=(c*(Y=o)-a)/2,p=(u*Y-s)/2,W=c*Y<=a?0:minMax(x-(v-d),-1*A,A),y=u*Y<=s?0:minMax(S-(b-m),-1*p,p),J++,Math.abs(W)===Math.abs(A)&&(d=W,v=x);Math.abs(y)===Math.abs(p)&&(m=y,b=S);i.setAttribute(B,Y),i.setAttribute(O,W),i.setAttribute(j,y),moveScaleElement(i,W+"px",y+"px",Y)}),document.addEventListener("mouseup",function(){if(!0===P||!1===G)return!1;G=!1}),document.addEventListener("touchstart",function(){P=!0}),massAddEventListener(V,"touchstart",function(t){if(t.preventDefault(),t.touches.length>2)return!1;if(n=this,i=this.children[0],w=n.getBoundingClientRect(),l=w.left,r=w.top,s=n.clientHeight,a=n.clientWidth,u=i.clientHeight,c=i.clientWidth,v=t.touches[0].clientX,b=t.touches[0].clientY,o=minMax(parseFloat(i.getAttribute(B)),N,z),1===(H=t.touches.length)){if(null===U[0])U[0]=t.target,U[1]=v,U[2]=b,setTimeout(function(){U=[null]},300);else if(U[0]===t.target&&Q<=1&&!0===isWithinRange(v,U[1]-10,U[1]+10)&&!0===isWithinRange(b,U[2]-10,U[2]+10))return addClass(i,q),!0===hasClass(n,T)?(i.setAttribute(B,1),i.setAttribute(O,0),i.setAttribute(j,0),removeClass(n,T),moveScaleElement(i,0,0,1)):(i.setAttribute(B,X),i.setAttribute(O,0),i.setAttribute(j,0),addClass(n,T),moveScaleElement(i,0,0,X)),setTimeout(function(){removeClass(i,q)},200),U=[null],!1;d=parseFloat(i.getAttribute(O)),m=parseFloat(i.getAttribute(j))}else 2===H&&(d=parseFloat(i.getAttribute(O)),m=parseFloat(i.getAttribute(j)),f=t.touches[1].clientX,g=t.touches[1].clientY,M=(v+f)/2,E=(b+g)/2,h=Math.sqrt((v-f)*(v-f)+(b-g)*(b-g)));Q=0,G=!0}),document.addEventListener("touchmove",function(t){if(!1===G)return!1;t.preventDefault(),x=t.touches[0].clientX,S=t.touches[0].clientY,H=t.touches.length,Q++,H>1?(C=t.touches[1].clientX,D=t.touches[1].clientY,R=Math.sqrt((x-C)*(x-C)+(S-D)*(S-D)),null===h&&(h=R),Math.abs(h-R)>=1&&(Y=minMax(R/h*o,N,z),A=(c*Y-a)/2,p=(u*Y-s)/2,F=Y-o,W=c*Y<=a?0:minMax(d-(M-l-a/2-d)/(Y-F)*F,-1*A,A),y=u*Y<=s?0:minMax(m-(E-r-s/2-m)/(Y-F)*F,-1*p,p),Y>1?addClass(n,T):removeClass(n,T),moveScaleElement(i,W+"px",y+"px",Y),h=R,o=Y,d=W,m=y)):(A=(c*(Y=o)-a)/2,p=(u*Y-s)/2,W=c*Y<=a?0:minMax(x-(v-d),-1*A,A),y=u*Y<=s?0:minMax(S-(b-m),-1*p,p),Math.abs(W)===Math.abs(A)&&(d=W,v=x),Math.abs(y)===Math.abs(p)&&(m=y,b=S),i.setAttribute(B,o),i.setAttribute(O,W),i.setAttribute(j,y),moveScaleElement(i,W+"px",y+"px",Y))},{passive:!1}),document.addEventListener("touchend",function(t){if(H=t.touches.length,!1===G)return!1;0===H?(i.setAttribute(B,o),i.setAttribute(O,W),i.setAttribute(j,y),h=null,G=!1):1===H?(v=t.touches[0].clientX,b=t.touches[0].clientY):H>1&&(h=null)}),massAddEventListener(V,"wheel",function(t){if(n=this,i=this.children[0],w=n.getBoundingClientRect(),s=n.clientHeight,a=n.clientWidth,u=i.clientHeight,c=i.clientWidth,l=w.left,r=w.top,o=minMax(parseFloat(i.getAttribute(B),N,z)),d=parseFloat(i.getAttribute(O)),m=parseFloat(i.getAttribute(j)),x=t.clientX,S=t.clientY,L=t.deltaY<0?1:-1,(Y=o+(F=k*L))<N||Y>z)return!1;A=(c*Y-a)/2,p=(u*Y-s)/2,Y<=1?(W=0,y=0):(W=c*Y<=a?0:minMax(d-(x-l-a/2-d)/(Y-F)*F,-1*A,A),y=u*Y<=s?0:minMax(m-(S-r-s/2-m)/(Y-F)*F,-1*p,p));Y>1?addClass(n,T):removeClass(n,T);i.setAttribute(B,Y),i.setAttribute(O,W),i.setAttribute(j,y),moveScaleElement(i,W+"px",y+"px",Y)})}function addClass(t,e){!1===hasClass(t,e)&&(t.className+=" "+e)}function disableScroll(t){t||(window.addEventListener&&window.addEventListener("DOMMouseScroll",preventDefault,!1),window.onwheel=preventDefault,window.onmousewheel=document.onmousewheel=preventDefault,window.ontouchmove=preventDefault),document.onkeydown=preventDefaultForScrollKeys}function enableScroll(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null}function isWithinRange(t,e,n){return t>=e&&t<=n}function hasClass(t,e){var n=new RegExp("(?:^|\\s)"+e+"(?!\\S)","g");return!(!t.className||!t.className.match(n))}function massAddEventListener(t,e,n,i){i=i||!1;for(var s=0;s<t.length;s++)t[s].addEventListener(e,n,i)}function minMax(t,e,n){return t<e?t=e:t>n&&(t=n),t}function moveScaleElement(t,e,n,i){t.style.cssText="-moz-transform : translate("+e+", "+n+") scale("+i+"); -ms-transform : translate("+e+", "+n+") scale("+i+"); -o-transform : translate("+e+", "+n+") scale("+i+"); -webkit-transform : translate("+e+", "+n+") scale("+i+"); transform : translate3d("+e+", "+n+", 0) scale3d("+i+", "+i+", 1);"}function preventDefault(t){(t=t||window.event).preventDefault&&t.preventDefault(),t.returnValue=!1}function preventDefaultForScrollKeys(t){if({37:1,38:1,39:1,40:1}[t.keyCode])return preventDefault(t),!1}function removeClass(t,e){var n=new RegExp("(?:^|\\s)"+e+"(?!\\S)","g");t.className=t.className.replace(n,"")}zoom();